<!-- Header -->
<header class="header">
    <div class="main-bar">
        <div class="container">
            <div class="header-content">
                <div class="left-content">
                    <a href="javascript:void(0);" class="back-btn">
                        <i class="fa-solid fa-arrow-left" routerLink="../mobAddOrder"
                            [hidden]="yeoman.orderSize<0 || !router.url.includes('mobPreOrder')"></i>
                    </a>
                    <h4 class="title mb-0 text-nowrap">Su orden</h4>
                </div>
                <div class="mid-content"></div>
                <div class="right-content"></div>
            </div>
        </div>
    </div>
</header>
<!-- Header -->

<!-- Page Content -->
<div class="page-content">
    <div class="container fb">
        <!-- <div class="promo-box">
            <span>CODE: 985AT5,</span>
        </div> -->
        <div class="product-list" *ngFor="let articulo of yeoman.neworder; let i =index"
            [hidden]="articulo.articulo.arnombre===undefined" style="padding: 12px 0 12px 12px;">
            <div class="dz-content">
                <h4 class="item-name">
                    <a >
                        {{articulo.articulo.arnombre}}
                    </a>
                </h4>
                <div class="price-wrapper">
                    <h6 class="current-price">Precio
                        <br/>
                        <span *ngIf=" (!articulo.articulo.precioConDescuento && !articulo.articulo.ardescuento) || (!articulo.articulo.ardescuento && articulo.articulo.descuentoIndex==-1) 
                        ">
                            {{articulo.articulo.arprecio | number:'1.2-2' }}
                        </span>
                        <span [hidden]="articulo.precioConDescuento ||  (!articulo.articulo.precioConDescuento && !articulo.articulo.ardescuento) || (!articulo.articulo.ardescuento && articulo.articulo.descuentoIndex==-1) 
                        ">
                            {{articulo.articulo.arprecio | number:'1.2-2' }}
                        </span>
                        <span
                            [hidden]="(!articulo.articulo.precioConDescuento && !articulo.articulo.ardescuento) || (!articulo.articulo.ardescuento && articulo.articulo.descuentoIndex==-1)  ">

                            <span class="precio-tachado">
                                {{articulo.articulo.arprecio | number:'1.2-2' }}
                            </span>
                            <span class="precio-diferente">
                                {{articulo.precioConDescuento | number:'1.2-2' }} </span>
                        </span>
                    </h6>
                    <span style="color: black;" style="font-size: 0.9rem; margin-left: 1%;">
                       <span style="font-weight: bold;">
                        Dcto
                        
                       </span>
                        <br/>
                        <span *ngIf="articulo.articulo.descuentoIndex>-1  && articulo.articulo.ardescuento<=0">                   
                            <span style="color: #000;">

                                {{articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex]}}

                            </span> %
</span>
<span style="color: black;" *ngIf="articulo  && articulo.articulo.descuentoIndex>=-1 
    && articulo.articulo.descuentoPorcentaje
    && articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex] 
    && articulo.articulo.arcodigo 
    && articulo.articulo.descuentoPorcentaje">
                                
     {{ articulo.articulo.ardescuento + articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex]}} %
</span>
<span *ngIf="articulo.articulo.ardescuento>0 && articulo.articulo.descuentoIndex==-1">
    <span style="color: black;">
        {{articulo.articulo.ardescuento}}
    </span>
    %</span>
                        <span *ngIf="articulo  && articulo.articulo.descuentoIndex>=-1 
                            && articulo.articulo.descuentoPorcentaje
                            && articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex] 
                            && articulo.articulo.arcodigo 
                            && articulo.articulo.descuentoPorcentaje">
                            {{ (articulo.articulo.arprecio *(articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex] + articulo.articulo.ardescuento) / 100) |
                            number:'1.2-2' }}
                           
                            <br />
                            <!-- ( <span style="color: black;">{{ articulo.articulo.ardescuento }} %</span> +<span style="color: blueviolet;">{{ articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex]}} %
                                <span style="color: blueviolet;">
                                    [DP]
                                </span>
                            </span> ) -->
                        </span>
                        <span
                            *ngIf="articulo.articulo.ardescuento>0 && articulo.articulo.descuentoIndex==-1">
                            {{ articulo.articulo.arprecio * articulo.articulo.ardescuento / 100 |
                            number:'1.2-2' }}
                           
                        </span>
                        <span
                        *ngIf="articulo.articulo.descuentoIndex>-1  && articulo.articulo.ardescuento<=0">
                            {{ (articulo.precioConDescuento *
                            articulo.articulo.descuentoPorcentaje[articulo.articulo.descuentoIndex]
                            / 100) |
                            number:'1.2-2' }}
                            
    


                        </span>
                        <span *ngIf="!articulo.precioConDescuento
                        
                        || (!articulo.articulo.precioConDescuento && !articulo.articulo.ardescuento) || (!articulo.articulo.ardescuento && articulo.articulo.descuentoIndex==-1) 
                        ">
                            Sin descuento

                        </span>
                    </span>
                    <span  style=" margin-left: 6%;">
                        <span style="font-weight: bold;">
                            IVA                            
                           </span>
                        <br/>{{articulo.articulo.ariva}} %
                        <br />
                        <span *ngIf="articulo.precioConDescuento !==undefined && articulo.articulo.arcodigo !==undefined ">
                            {{articulo.precioConDescuento*articulo.articulo.ariva /100 |
                            number:'1.2-2'}} 
                        </span>
                        <span *ngIf="articulo.precioConDescuento ===undefined && articulo.articulo.arcodigo !==undefined ">
                            {{articulo.articulo.arprecio*articulo.articulo.ariva /100 |
                            number:'1.2-2'}}
                        </span>
                    </span>
                   
                </div>
               
             
                <div class="footer-wrapper">
                    <div class="icon-box-4" style="position: unset;" (click)="outOfNewOrder(i)">
                        <i class="fa-solid fa-trash" style="color: red;"></i>
                    </div>
                    <!-- <span class="product-title">1 pack</span> -->
                </div>
            </div>
            <div class="text-end" style="width: 42%;">
                <a href="javascript:void(0);" class="dz-media media-70" style="margin: auto;">
                    <img class="rounded-sm" src="assets/meat/images/not.jpg" alt="image">
                </a>

                <div class="dz-stepper style-5 border-1 rounded-stepper" style="width: 100%; margin-top: 30px;">
                    <div class="input-group bootstrap-touchspin bootstrap-touchspin-injected">
                        <span class="input-group-btn input-group-prepend">
                            <button class="btn btn-primary btn-sm bootstrap-touchspin-down" type="button"
                                (click)="minus(i)">-</button>
                        </span>
                        <input readonly="" class="stepper form-control" type="text" value="{{articulo.cantidad}}"
                            name="demo3">
                        <span class="input-group-btn input-group-append">
                            <button class="btn btn-primary btn-sm bootstrap-touchspin-up" type="button"
                                (click)="plus(i)">+</button>
                        </span>
                    </div>
                </div>

            </div>

        </div>

        <div class="bill-detail">
            <!-- <h6>Su Orden</h6> -->
            <ul>
                <li>
                    <span>Sub-total</span>
                    <span class="price">
                        <!-- <i class="fa-solid fa-indian-rupee-sign"></i> -->
                        {{ yeoman.totalOrder | number:'1.2-2'}}</span>
                </li>
                <li>
                    <span>Total dcto</span>
                    <span class="price">
                        <!-- <i class="fa-solid fa-indian-rupee-sign"></i> -->
                        {{yeoman.totalDescuento | number:'1.2-2'}}</span>
                </li>
                <li class="mb-2 pb-2">
                    <span>Total IVA</span>
                    <span class="price">
                        <!-- <i class="fa-solid fa-indian-rupee-sign"></i> -->
                        {{yeoman.totalIVA | number:'1.2-2'}}</span>
                </li>
                <li>
                    <h6 class="mb-0">Total</h6>
                    <span class="text-danger">
                        <!-- <i class="fa-solid fa-indian-rupee-sign"></i> -->
                        {{ yeoman.totalOrder + yeoman.totalIVA | number:'1.2-2'}}
                    </span>
                </li>
            </ul>
        </div>
    </div>
</div>
<!-- FOOTER -->

<footer class="footer fixed">
    <div class="container" style="margin: 0px;">
        <a class="btn mb-3 btn-primary w-100" style="box-shadow: '0 4px 20px -8px var(--primary)'; border-radius: 15px; margin:3px;" (click)="procesar()" >Enviar</a>
    </div>
</footer>